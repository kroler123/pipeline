#!groovy
// Check properties
properties([disableConcurrentBuilds()])

pipeline {
	agent {
		label 'master'
	}
	options {
		buildDiscarder(logRotator(numToKeepStr: '10', artifactNumToKeepStr: '10'))
		timestamps()
		skipStagesAfterUnstable()
	}
	stages {
		stage("Second step") {
			steps {
				sh 'hostname'
			}
		}
		stage("Three step") {
			environment {
				AN_ACCESS_KEY = credentials('my-prefined-secret-test')
			}
			steps {
				sh 'printenv'
			}
		}
	}
}
